#!/usr/bin/python3
from time import sleep
import subprocess
import re
import optparse

def options_parse():
    parser = optparse.OptionParser()
    parser.add_option("-i", "--interface", dest="interface", help="interface to change mac address")
    parser.add_option("-m", "--mac", dest="new_mac", help="new mac address to use")
    return parser.parse_args()

def change_mac_address(interface, new_mac):
    mac_validation = ("^([0-9A-Fa-f]{2}[:-])" + "{5}([0-9A-Fa-f]{2})|" + "([0-9a-fA-F]{4}\\."
                      + "[0-9a-fA-F]{4}\\." + "[0-9a-fA-F]{4})$")
    if re.match(mac_validation, new_mac):
        subprocess.call(["ifconfig", interface, "down"])
        subprocess.call(["ifconfig", interface, "hw", "ether", new_mac])
        subprocess.call(["ifconfig", interface, "up"])
        print(f"Yor new MAC address for {interface} is {new_mac}, you can check it down here...\n\n")
        sleep(3)

    else:
        print("checkout your syntax (Remember MAC's first octet must begin even)")

(values_inputs, args) = options_parse()
change_mac_address(values_inputs.interface, values_inputs.new_mac)
subprocess.call(["ifconfig", values_inputs.interface])
